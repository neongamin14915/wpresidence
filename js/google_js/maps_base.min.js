wp_estate_kind_of_map=parseInt(mapbase_vars.wp_estate_kind_of_map);var lealet_map_move_on_hover=0,propertyMarker_submit="",leaflet_map_move_flag=0,geolocation_search_used=0;function wpresidence_map_general_start_map(page_map){"use strict";var zoom_level;zoom_level="prop"==page_map?parseInt(googlecode_property_vars.page_custom_zoom,10):parseInt(googlecode_regular_vars.page_custom_zoom,10),jQuery("#wpestate_full_map_control_data").length>0&&(zoom_level=jQuery("#wpestate_full_map_control_data").attr("data-zoom")),1===wp_estate_kind_of_map?wpresidence_google_start_map(zoom_level):2===wp_estate_kind_of_map&&wpresidence_leaflet_start_map(zoom_level)}function wpresidence_leaflet_start_map(zoom_level){"use strict";"undefined"!=typeof curent_gview_long&&""!==curent_gview_lat&&"0"!==curent_gview_long||("undefined"!=typeof googlecode_property_vars&&(curent_gview_lat=googlecode_property_vars.general_latitude),"undefined"!=typeof googlecode_regular_vars&&(curent_gview_lat=googlecode_regular_vars.general_latitude)),"undefined"!=typeof curent_gview_long&&""!==curent_gview_long&&"0"!==curent_gview_long||("undefined"!=typeof googlecode_property_vars&&(curent_gview_long=googlecode_property_vars.general_longitude),"undefined"!=typeof googlecode_regular_vars&&(curent_gview_long=googlecode_regular_vars.general_longitude));var mapCenter=L.latLng(curent_gview_lat,curent_gview_long);if(document.getElementById("googleMap"))map=L.map("googleMap",{center:mapCenter,zoom:zoom_level,keepBuffer:10}).on("load",(function(e){jQuery("#gmap-loading").remove()}));else{if(!document.getElementById("googleMapSlider"))return;map=L.map("googleMapSlider",{center:mapCenter,zoom:zoom_level}).on("load",(function(e){jQuery("#gmap-loading").remove()}))}wpresidence_leaflet_initialize_map_common(map)}function wpresidence_leaflet_initialize_map_common(map){var tileLayer=wpresidence_open_stret_tile_details();map.addLayer(tileLayer),map.scrollWheelZoom.disable(),Modernizr.mq("only all and (max-width: 768px)")&&map.dragging.disable(),map.on("popupopen",(function(e){if(lealet_map_move_on_hover=1,0==jQuery("#google_map_prop_list_wrapper").length){var px=map.project(e.popup._latlng);mapfunctions_vars.useprice,map.panTo(map.unproject(px),{animate:!0})}lealet_map_move_on_hover=1})),jQuery("#gmap-loading").remove(),map.on("load",(function(e){jQuery("#gmap-loading").remove()})),Modernizr.mq("only all and (max-width: 768px)")&&map.on("dblclick ",(function(e){map.dragging.enabled()?map.dragging.disable():map.dragging.enable()})),markers_cluster=L.markerClusterGroup({iconCreateFunction:function(cluster){return L.divIcon({html:'<div class="leaflet_cluster" style="background-image: url('+images.cloud_pin+')">'+cluster.getChildCount()+"</div>"})}})}function wpresidence_leaflet_map_cluster(){map.addLayer(markers_cluster)}function wprentals_map_general_map_pan_move(){1===wp_estate_kind_of_map?wprentals_google_map_pan_move():2===wp_estate_kind_of_map?wprentals_leaflet_map_pan_move():wp_estate_kind_of_map}function wpresidence_open_stret_tile_details(){if(""===mapbase_vars.wp_estate_mapbox_api_key)var tileLayer=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});else var tileLayer=L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token="+mapbase_vars.wp_estate_mapbox_api_key,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"});return tileLayer}function wpresidence_google_start_map(zoom_level){"use strict";var mapOptions,styles;if(jQuery("#googleMap").hasClass("full_height_map")){var new_height=jQuery(window).height()-jQuery(".master_header").height();jQuery("#googleMap,#gmap_wrapper").css("height",new_height)}if("undefined"!=typeof curent_gview_long&&""!==curent_gview_lat&&"0"!==curent_gview_lat||("undefined"!=typeof googlecode_property_vars&&(curent_gview_lat=googlecode_property_vars.general_latitude),"undefined"!=typeof googlecode_regular_vars&&(curent_gview_lat=googlecode_regular_vars.general_latitude)),"undefined"!=typeof curent_gview_long&&""!==curent_gview_long&&"0"!==curent_gview_long||("undefined"!=typeof googlecode_property_vars&&(curent_gview_long=googlecode_property_vars.general_longitude),"undefined"!=typeof googlecode_regular_vars&&(curent_gview_long=googlecode_regular_vars.general_longitude)),"undefined"!=typeof googlecode_regular_vars)var map_type=googlecode_regular_vars.type.toLowerCase();else if("undefined"!=typeof googlecode_property_vars)var map_type=googlecode_property_vars.type.toLowerCase();var with_bound=0,mapOptions={flat:!1,noClear:!1,zoom:parseInt(zoom_level),scrollwheel:!1,draggable:!0,center:new google.maps.LatLng(curent_gview_lat,curent_gview_long),mapTypeId:map_type,streetViewControl:!1,disableDefaultUI:!0,gestureHandling:"cooperative"};if(document.getElementById("googleMap"))map=new google.maps.Map(document.getElementById("googleMap"),mapOptions);else{if(!document.getElementById("googleMapSlider"))return;map=new google.maps.Map(document.getElementById("googleMapSlider"),mapOptions)}if(google.maps.visualRefresh=!0,"yes"===mapfunctions_vars.show_g_search_status&&wpestate_set_google_search(map),jQuery("#wpestate_full_map_control_data").length>0){var styles=jQuery("#wpestate_full_map_control_data").attr("data-map_style");map.setOptions({styles:styles})}var styles="";if(""!==mapfunctions_vars.map_style)var styles=JSON.parse(mapfunctions_vars.map_style);jQuery("#wpestate_full_map_control_data").length>0&&""!==map_style_shortcode&&(styles=map_style_shortcode),""!==styles&&map.setOptions({styles:styles}),google.maps.event.addListener(map,"tilesloaded",(function(){jQuery("#gmap-loading").remove()}))}function wpresidence_map_general_set_markers(map,markers,with_bound){"use strict";wpresidence_google_setMarkers2(map,markers,with_bound)}function wpresidence_google_setMarkers2(map,locations){"use strict";var map_open,myLatLng,selected_id=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"));isNaN(selected_id)&&(selected_id=parseInt(jQuery("#googleMapSlider").attr("data-post_id"),10));var open_height=parseInt(mapfunctions_vars.open_height,10),closed_height=parseInt(mapfunctions_vars.closed_height,10),boxText=document.createElement("div");width_browser=jQuery(window).width(),infobox_width=700,vertical_pan=-215,width_browser<900&&(infobox_width=500),width_browser<600&&(infobox_width=400),width_browser<400&&(infobox_width=200),1===wp_estate_kind_of_map&&(bounds=new google.maps.LatLngBounds);for(var i=0;i<locations.length;i++){var beach=locations[i],id=beach[10],lat=beach[1],lng=beach[2],title=decodeURIComponent(beach[0]),pin=beach[8],counter=beach[3],image=decodeURIComponent(beach[4]),price=decodeURIComponent(beach[5]),single_first_type=decodeURIComponent(beach[6]),single_first_action=decodeURIComponent(beach[7]),link=decodeURIComponent(beach[9]),cleanprice=beach[11],rooms=beach[12],baths=beach[13],size=beach[14],single_first_type_name=decodeURIComponent(beach[15]),single_first_action_name=decodeURIComponent(beach[16]),pin_price=decodeURIComponent(beach[17]);selected_id===id&&(found_id=i),1===wp_estate_kind_of_map?wpestate_createMarker(pin_price,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,rooms,baths,cleanprice,single_first_type_name,single_first_action_name):2===wp_estate_kind_of_map&&wpresidence_createMarker_leaflet(pin_price,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,rooms,baths,cleanprice,single_first_type_name,single_first_action_name)}}function wpestate_hover_color_on_click(){jQuery("#googleMap .openstreet_price_marker").on("click",(function(){jQuery(".openstreet_price_marker").removeClass("openstreet_price_marker_on_click"),jQuery(this).addClass("openstreet_price_marker_on_click")}))}function wpresidence_map_general_cluster(){"use strict";1===wp_estate_kind_of_map?wpestate_map_cluster():2===wp_estate_kind_of_map&&wpresidence_leaflet_map_cluster()}function wpresidence_map_general_fit_to_bounds(with_bound){"use strict";1!==geolocation_search_used?1===wp_estate_kind_of_map?wpresidence_google_fit_to_bounds(with_bound):2===wp_estate_kind_of_map&&wpresidence_leaflet_fit_to_bounds(with_bound):geolocation_search_used=0}function wpresidence_map_panorama(){"use strict";if(2!=parseInt(mapbase_vars.wp_estate_kind_of_map)){var viewPlace=new google.maps.LatLng(curent_gview_lat,curent_gview_long);panorama=map.getStreetView(),panorama.setPosition(viewPlace),heading=parseInt(googlecode_property_vars.camera_angle),panorama.setPov({heading:heading,pitch:0}),google.maps.event.addListener(panorama,"closeclick",(function(){jQuery("#gmap-next,#gmap-prev ,#geolocation-button,#gmapzoomminus,#gmapzoomplus").show(),jQuery("#street-view").removeClass("mapcontrolon")}))}}function wpresidence_google_fit_to_bounds(with_bound){"use strict";document.getElementById("google_map_prop_list")||document.getElementById("googleMap")&&1===with_bound&&("undefined"==typeof bounds||bounds.isEmpty()?wpestate_fit_bounds_nolsit():wpestate_fit_bounds(bounds))}function wpresidence_map_general_spiderfy(){"use strict";1===wp_estate_kind_of_map?jQuery("body").hasClass("single-estate_property")||(oms=new OverlappingMarkerSpiderfier(map,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,legWeight:2}),wpestate_setOms(gmarkers)):wp_estate_kind_of_map}function wpresidence_leaflet_fit_to_bounds(with_bound){1===with_bound&&"undefined"!=typeof bounds_list&&(bounds_list.isValid()?wpestate_fit_bounds_leaflet(bounds_list):wpestate_fit_bounds_nolsit_leaflet())}function wpestate_fit_bounds_leaflet(bounds){if(is_fit_bounds_zoom=1,""!=placeCircle)map.fitBounds(placeCircle.getBounds());else if(1===gmarkers.length){var center=gmarkers[0].getLatLng();map.panTo(center),map.setZoom(10),is_fit_bounds_zoom=0}else map.fitBounds(bounds),setTimeout((function(){map.fitBounds(bounds)}),500)}function wprentals_leaflet_map_pan_move(){"yes"===googlecode_regular_vars.on_demand_pins&&1!=mapfunctions_vars.is_tax&&"1"===mapfunctions_vars.is_property_list&&map.on("moveend",(function(e){wpestate_ondenamd_map_moved_leaflet()}))}function wprentals_google_map_pan_move(){"yes"===googlecode_regular_vars.on_demand_pins&&1!=mapfunctions_vars.is_tax&&"1"===mapfunctions_vars.is_property_list&&map.addListener("idle",(function(){wpestate_ondenamd_map_moved()}))}function wpresidence_createMarker_leaflet(pin_price,size,i,id,lat,lng,pin,title,counter,image,price,single_first_type,single_first_action,link,rooms,baths,cleanprice,single_first_type_name,single_first_action_name){"use strict";var infoboxWrapper=document.createElement("div");infoboxWrapper.className="leafinfobox-wrapper";var infobox="",poss=0,infobox_class=" price_infobox ",price2=price=price,my_custom_curr_pos=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(my_custom_curr_pos)&&-1!==my_custom_curr_pos){var converted_price=wpestate_get_price_currency(cleanprice,cleanprice),testRE;null!==(testRE=price.match("</span>(.*)<span class="))&&(price2=price.replace(testRE[1],converted_price))}"yes"===mapfunctions_vars.useprice&&(infobox_class=" openstreet_map_price_infobox ");var info_image="";info_image=""===image?'<img width="400" height="161" src="'+mapfunctions_vars.path+'/idxdefault.jpg" class="attachment-property_map1 size-property_map1 wp-post-image" alt="">':image;var category=decodeURIComponent(single_first_type.replace(/-/g," ")),action=decodeURIComponent(single_first_action.replace(/-/g," ")),category_name=decodeURIComponent(single_first_type_name.replace(/-/g," ")),action_name=decodeURIComponent(single_first_action_name.replace(/-/g," ")),in_type=mapfunctions_vars.in_text,infoguest,inforooms,infobaths,inforooms,infosize,title;""!==category&&""!==action||(in_type=" "),in_type=" / ",infobaths=""!=baths&&0!=baths?'<span id="infobath">'+baths+" "+mapfunctions_vars.ba+"</span>":"",inforooms=""!=rooms&&0!=rooms?'<span id="inforoom">'+rooms+" "+mapfunctions_vars.bd+"</span>":"",infosize=""!=size?'<span id="infosize">'+size+"</span>":"",(title=title.substr(0,30)).length>30&&(title+="..."),infobox+=wpestate_generate_infobox_leaflet(infobox_class,title,link,info_image,price,cleanprice,infosize,infobaths,inforooms);var markerOptions={riseOnHover:!0},markerCenter=L.latLng(lat,lng),propertyMarker="";if("yes"===mapfunctions_vars.useprice){var price2=price,my_custom_curr_pos=parseFloat(wpestate_getCookie_map("my_custom_curr_pos"));if(!isNaN(my_custom_curr_pos)&&-1!==my_custom_curr_pos){var converted_price=wpestate_get_price_currency(cleanprice,cleanprice),testRE;null!==(testRE=price.match("</span>(.*)<span class="))&&(price2=price.replace(testRE[1],converted_price))}var price_pin_class,pin_price_marker='<div class="'+("wpestate_marker openstreet_price_marker "+wpestate_makeSafeForCSS(single_first_type_name.trim())+" "+wpestate_makeSafeForCSS(single_first_action_name.trim()))+'">';void 0!==price&&("no"===mapfunctions_vars.use_price_pins_full_price?pin_price_marker+='<div class="interior_pin_price">'+pin_price+"</div>":pin_price_marker+='<div class="interior_pin_price">'+price2+"</div>"),pin_price_marker+="</div>";var myIcon=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:pin_price_marker});propertyMarker=L.marker(markerCenter,{icon:myIcon})}else{var markerImage={iconUrl:wprentals_custompin_leaflet(pin),iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]};markerOptions.icon=L.icon(markerImage),propertyMarker=L.marker(markerCenter,markerOptions)}propertyMarker.idul=id,propertyMarker.pin=pin,"yes"===mapfunctions_vars.user_cluster?markers_cluster.addLayer(propertyMarker):propertyMarker.addTo(map),gmarkers.push(propertyMarker),"undefined"!=typeof bounds_list&&bounds_list.isValid()?bounds_list.extend(propertyMarker.getLatLng()):bounds_list=L.latLngBounds(propertyMarker.getLatLng(),propertyMarker.getLatLng()),infoboxWrapper.innerHTML=infobox,propertyMarker.bindPopup(infobox)}function wprentals_custompinchild_leaflet(image){"use strict";var custom_img,extension="",ratio=jQuery(window).dense("devicePixelRatio");return ratio>1&&(extension="_2x"),""===images.userpin?custom_img=mapfunctions_vars.path+"/userpin"+extension+".png":(custom_img=images.userpin,ratio>1&&(custom_img=wpestate_get_custom_retina_pin(custom_img))),custom_img}function wprentals_custompin_leaflet(image){"use strict";if("yes"===mapfunctions_vars.useprice)return mapfunctions_vars.path+"/pixel.png";var custom_img="",extension="",ratio=jQuery(window).dense("devicePixelRatio");return ratio>1&&(extension="_2x"),"no"===mapfunctions_vars.use_single_image_pin?""!==image?""===images[image]?custom_img=mapfunctions_vars.path+"/"+image+extension+".png":(custom_img=images[image],ratio>1&&(custom_img=wpestate_get_custom_retina_pin(custom_img))):custom_img=images.single_pin:custom_img=ratio>1?wpestate_get_custom_retina_pin(images.single_pin):images.single_pin,void 0===custom_img&&(custom_img=images.single_pin),custom_img}function wprentals_map_resize(){1===wp_estate_kind_of_map?google.maps.event.trigger(map,"resize"):2===wp_estate_kind_of_map?map.invalidateSize():wp_estate_kind_of_map}function wprentals_initialize_map_submit_leaflet(){var listing_lat=jQuery("#property_latitude").val(),listing_lon=jQuery("#property_longitude").val();""!==listing_lat&&0!==listing_lat&&"0"!==listing_lat||(listing_lat=google_map_submit_vars.general_latitude),""!==listing_lon&&0!==listing_lon&&"0"!==listing_lon||(listing_lon=google_map_submit_vars.general_longitude);var mapCenter=L.latLng(listing_lat,listing_lon);if(document.getElementById("googleMapsubmit")){map=L.map("googleMapsubmit",{center:mapCenter,zoom:17}).on("load",(function(e){})),map_intern=1;var tileLayer=wpresidence_open_stret_tile_details();map.addLayer(tileLayer),map.on("click",(function(e){map.removeLayer(propertyMarker_submit);var markerCenter=L.latLng(e.latlng);(propertyMarker_submit=L.marker(e.latlng).addTo(map)).bindPopup('<div class="submit_leaflet_admin">Latitude: '+e.latlng.lat+" Longitude: "+e.latlng.lng+"</div>").openPopup(),jQuery("#property_latitude").val(e.latlng.lat),jQuery("#property_longitude").val(e.latlng.lng)}));var markerCenter=L.latLng(listing_lat,listing_lon);(propertyMarker_submit=L.marker(markerCenter).addTo(map)).bindPopup('<div class="submit_leaflet_admin">Latitude: '+listing_lat+" Longitude: "+listing_lon+"</div>"),setTimeout((function(){propertyMarker_submit.openPopup()}),600)}}function wpresidence_map_resise(){1===wp_estate_kind_of_map?google.maps.event.addListenerOnce(map,"idle",(function(){setTimeout((function(){google.maps.event.trigger(map,"resize")}),600)})):2===wp_estate_kind_of_map&&(map.invalidateSize(),setTimeout((function(){map.invalidateSize()}),600))}function wpresidence_initialize_map_contact_leaflet(){"use strict";var mapCenter=L.latLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude);map=L.map("googleMap",{center:mapCenter,zoom:parseInt(mapbase_vars.page_custom_zoom,10)});var tileLayer=wpresidence_open_stret_tile_details();map.addLayer(tileLayer),map.scrollWheelZoom.disable(),Modernizr.mq("only all and (max-width: 768px)")&&map.dragging.disable(),jQuery("#gmap-loading").remove(),map.on("popupopen",(function(e){var px=map.project(e.popup._latlng);"yes"===mapfunctions_vars.useprice?px.y-=115:px.y-=60,map.panTo(map.unproject(px),{animate:!0})}));var markerCenter=L.latLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude),markerImage={iconUrl:images.single_pin,iconSize:[44,50],iconAnchor:[20,50],popupAnchor:[1,-50]},markerOptions={riseOnHover:!0};markerOptions.icon=L.icon(markerImage);var propertyMarker=L.marker(markerCenter,markerOptions);propertyMarker.addTo(map),propertyMarker.fire("click"),Modernizr.mq("only all and (max-width: 768px)")&&map.on("dblclick ",(function(e){map.dragging.enabled()?map.dragging.disable():map.dragging.enable()}))}function wpresidence_initialize_map_contact(){"use strict";if(document.getElementById("googleMap")){var mapOptions={zoom:parseInt(mapbase_vars.page_custom_zoom),scrollwheel:!1,center:new google.maps.LatLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude),mapTypeId:mapbase_vars.type.toLowerCase(),streetViewControl:!1,disableDefaultUI:!0,gestureHandling:"cooperative"};map=new google.maps.Map(document.getElementById("googleMap"),mapOptions),google.maps.event.addListener(map,"tilesloaded",(function(){jQuery("#gmap-loading").remove()}));var styles="";""!==mapfunctions_vars.map_style&&(styles=JSON.parse(mapfunctions_vars.map_style)),jQuery("#wpestate_full_map_control_data").length>0&&(""!==map_style_shortcode&&(styles=map_style_shortcode),mapfunctions_vars.shortcode_map_style),map.setOptions({styles:styles}),pins=mapbase_vars.markers,markers=jQuery.parseJSON(pins),wpestate_setMarkers_contact(map,markers)}}function wpestate_custompincontact(image){"use strict";return image={url:images.single_pin,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}function wpestate_setMarkers_contact(map,beach){"use strict";var shape={coord:[1,1,1,38,38,59,59,1],type:"poly"},title,boxText,myOptions={content:document.createElement("div"),disableAutoPan:!0,maxWidth:500,pixelOffset:new google.maps.Size(-90,-210),zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",draggable:!0,infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};infoBox=new InfoBox(myOptions);var myLatLng=new google.maps.LatLng(mapbase_vars.hq_latitude,mapbase_vars.hq_longitude),marker=new google.maps.Marker({position:myLatLng,map:map,icon:wpestate_custompincontact(beach[8]),shape:shape,title:decodeURIComponent(beach[0].replace(/\+/g," ")),zIndex:1,image:beach[4],price:beach[5],type:beach[6],type2:beach[7],infoWindowIndex:0});gmarkers.push(marker)}window.wpestateInitMap=function(){},jQuery(document).ready((function($){"use strict";wpestate_hover_color_on_click()}));