var map="",selected_city="",geocoder,gmarkers=[],propertyMarker_submit;function wpresidence_admin_submit_initialize(){"use strict";if(1===parseInt(admin_google_vars.wpresidence_map_type)){var myPlace=new google.maps.LatLng(admin_google_vars.general_latitude,admin_google_vars.general_longitude),mapOptions={flat:!1,noClear:!1,zoom:17,scrollwheel:!1,draggable:!0,center:myPlace,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("googleMap"),mapOptions),google.maps.visualRefresh=!0;var marker=new google.maps.Marker({position:myPlace});marker.setMap(map),gmarkers.push(marker),google.maps.event.addListener(map,"click",(function(event){wpestate_placeMarker(event.latLng),google.maps.visualRefresh=!0})),map.setCenter(myPlace)}else if(2===parseInt(admin_google_vars.wpresidence_map_type)){var mapCenter=L.latLng(admin_google_vars.general_latitude,admin_google_vars.general_longitude);map=L.map("googleMap",{center:mapCenter,zoom:15});var tileLayer=wpresidence_open_stret_tile_details_admin();map.addLayer(tileLayer),map.on("click",(function(e){map.removeLayer(propertyMarker_submit);var markerCenter=L.latLng(e.latlng);(propertyMarker_submit=L.marker(e.latlng).addTo(map)).bindPopup('<div class="submit_leaflet_admin">Latitude: '+e.latlng.lat+" Longitude: "+e.latlng.lng+"</div>").openPopup(),jQuery("#property_latitude").val(e.latlng.lat),jQuery("#property_longitude").val(e.latlng.lng),jQuery("#agency_lat").val(e.latlng.lat),jQuery("#agency_long").val(e.latlng.lng),jQuery("#developer_lat").val(e.latlng.lat),jQuery("#developer_long").val(e.latlng.lng)}));var markerCenter=L.latLng(mapCenter);(propertyMarker_submit=L.marker(markerCenter).addTo(map)).bindPopup('<div class="submit_leaflet_admin">Latitude: '+admin_google_vars.general_latitude+" Longitude: "+admin_google_vars.general_longitude+"</div>"),jQuery("#property_map_trigger").on("click",(function(){setTimeout((function(){map.invalidateSize()}),600),setTimeout((function(){propertyMarker_submit.openPopup()}),600)}))}}function wpresidence_open_stret_tile_details_admin(){if(""===admin_google_vars.wp_estate_mapbox_api_key)var tileLayer=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});else var tileLayer=L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token="+admin_google_vars.wp_estate_mapbox_api_key,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"});return tileLayer}function wpestate_placeMarker(location){"use strict";wpestate_removeMarkersadmin();var marker=new google.maps.Marker({position:location,map:map}),myElem,infowindow;gmarkers.push(marker),new google.maps.InfoWindow({content:"Latitude: "+location.lat()+"<br>Longitude: "+location.lng()}).open(map,marker),null!==(myElem=document.getElementById("property_latitude"))&&(document.getElementById("property_latitude").value=location.lat(),document.getElementById("property_longitude").value=location.lng()),null!==(myElem=document.getElementById("agency_lat"))&&(document.getElementById("agency_lat").value=location.lat(),document.getElementById("agency_long").value=location.lng()),null!==(myElem=document.getElementById("developer_lat"))&&(document.getElementById("developer_lat").value=location.lat(),document.getElementById("developer_long").value=location.lng())}function wpestate_removeMarkersadmin(){"use strict";for(var i=0;i<gmarkers.length;i++)gmarkers[i].setMap(null)}function wpestate_admin_codeAddress(){"use strict";var state,city,address="",listing_lat,listing_long,open_street_address="";if(jQuery("#property_address").length>0){var checkedValue;address=document.getElementById("property_address").value,city=(checkedValue=jQuery("#property_city-all input:checked").parent()).text(),state=(checkedValue=jQuery("#property_county_state-all input:checked").parent()).text();var country=document.getElementById("property_country").value}else if(jQuery("#developer_address").length>0){var checkedValue;address=document.getElementById("developer_address").value,city=(checkedValue=jQuery("#property_city_developer-all input:checked").parent()).text(),state=(checkedValue=jQuery("#property_county_state_developer-all input:checked").parent()).text();var country=""}else if(jQuery("#agency_address").length>0){var checkedValue;address=document.getElementById("agency_address").value,city=(checkedValue=jQuery("#city_agency-all input:checked").parent()).text(),state=(checkedValue=jQuery("#county_state_agency-all input:checked").parent()).text();var country=""}var full_addr=address;if(city&&(full_addr=full_addr+","+city),state&&(full_addr=full_addr+","+state),country&&(full_addr=full_addr+","+country),open_street_address=address+","+city+","+country,1==parseInt(admin_google_vars.geolocation_type))(geocoder=new google.maps.Geocoder).geocode({address:full_addr},(function(results,status){status==google.maps.GeocoderStatus.OK?(listing_lat=results[0].geometry.location.lat(),listing_long=results[0].geometry.location.lng(),wpresidence_internalmap_set_postion(listing_lat,listing_long)):alert(admin_google_vars.geo_fails+status)}));else if(2==parseInt(admin_google_vars.geolocation_type))var jqxhr=jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",addressdetails:"1",q:open_street_address}).done((function(data){void 0!==data[0]?(listing_lat=data[0].lat,listing_long=data[0].lon,wpresidence_internalmap_set_postion(listing_lat,listing_long)):alert(admin_google_vars.geo_fails+status)})).fail((function(){})).always((function(){}))}function wpresidence_internalmap_set_postion(listing_lat,listing_long){if(wpestate_removeMarkersadmin(),1===parseInt(admin_google_vars.wpresidence_map_type)){var myLatLng=new google.maps.LatLng(listing_lat,listing_long);map.setCenter(myLatLng);var marker=new google.maps.Marker({map:map,position:myLatLng}),infowindow;gmarkers.push(marker),new google.maps.InfoWindow({content:"Latitude: "+listing_lat+"<br>Longitude: "+listing_long}).open(map,marker)}else if(2===parseInt(admin_google_vars.wpresidence_map_type)){map.removeLayer(propertyMarker_submit);var mapCenter=L.latLng(listing_lat,listing_long),markerCenter=L.latLng(mapCenter);(propertyMarker_submit=L.marker(markerCenter).addTo(map)).bindPopup('<div class="submit_leaflet_admin">Latitude: '+listing_lat+" Longitude: "+listing_long+"</div>").openPopup(),map.panTo(new L.LatLng(listing_lat,listing_long))}jQuery("#property_latitude").val(listing_lat),jQuery("#property_longitude").val(listing_long),jQuery("#developer_lat").val(listing_lat),jQuery("#developer_long").val(listing_long),jQuery("#agency_lat").val(listing_lat),jQuery("#agency_long").val(listing_long)}jQuery(document).ready((function($){"use strict";var myElem;wpresidence_admin_submit_initialize(),null!==document.getElementById("property_map_trigger")&&jQuery("#property_map_trigger").on("click",(function(){1===parseInt(admin_google_vars.wpresidence_map_type)&&google.maps.event.trigger(map,"resize")}))})),jQuery("#admin_place_pin").on("click",(function(event){"use strict";event.preventDefault(),wpestate_admin_codeAddress()})),jQuery("#property_citychecklist label").on("click",(function(event){"use strict";selected_city=jQuery(this).text()}));