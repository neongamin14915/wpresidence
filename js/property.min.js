var morgageChart;function wpestate_enable_star_action(){jQuery(".empty_star").on({mouseenter:function(){var loop,index;index=jQuery(".empty_star").index(this),jQuery(".empty_star").each((function(){(loop=jQuery(".empty_star").index(this))<=index?jQuery(this).addClass("starselected"):jQuery(this).removeClass("starselected")}))},mouseleave:function(){}}),jQuery(".rating").mouseleave((function(){jQuery(".empty_star").removeClass("starselected")})),jQuery(".empty_star").on("click",(function(event){jQuery(".empty_star").removeClass("starselected_click");var index=jQuery(".empty_star").index(this),loop="";jQuery(".empty_star").each((function(){(loop=jQuery(".empty_star").index(this))<=index&&jQuery(this).addClass("starselected_click")}))}))}function wpestate_show_morg_pie(){if(document.getElementById("morgage_chart")){var data_morg={datasets:[{data:[jQuery("#morg_principal").attr("data-per"),jQuery("#monthly_property_tax").attr("data-per"),jQuery("#hoo_fees").attr("data-per")],backgroundColor:["#0073e1","#0dc3f8","#FF5E5B"]}],labels:[wpestate_property_vars.label_principal,wpestate_property_vars.label_property_tax,wpestate_property_vars.label_hoo]},options_morg="",ctx_pie=jQuery("#morgage_chart").get(0).getContext("2d");morgageChart=new Chart(ctx_pie,{type:"doughnut",data:data_morg,options:{responsive:!0,cutoutPercentage:70,layout:{padding:{left:50,right:0,top:0,bottom:0}},title:{display:!1},animation:{animateScale:!0,animateRotate:!0},tooltips:{enabled:!1},legend:{display:!1}}}),jQuery("#morgage_down_payment").on("change",(function(){var morgage_down_payment_value=parseFloat(jQuery("#morgage_down_payment").val(),10),morgage_home_price=parseFloat(jQuery("#morgage_home_price").val(),10),morgage_down_payment_percent=parseFloat(100*morgage_down_payment_value/morgage_home_price,10);jQuery("#morgage_down_payment_percent").val(morgage_down_payment_percent.toFixed(2)),wpestate_compute_morg()})),jQuery("#morgage_down_payment_percent").on("change",(function(){var morgage_home_price=parseFloat(jQuery("#morgage_home_price").val(),10),morgage_down_payment_percent=parseFloat(jQuery("#morgage_down_payment_percent").val(),10),morgage_down_payment_value=parseFloat(morgage_home_price*morgage_down_payment_percent/100);jQuery("#morgage_down_payment").val(morgage_down_payment_value.toFixed(2)),wpestate_compute_morg()})),jQuery("#monthly_property_tax,#hoo_fees").on("change",(function(){var hoo_fees=parseFloat(jQuery("#hoo_fees").val(),10),property_tax=parseFloat(jQuery("#monthly_property_tax").val(),10),morg_principal,total_monthly=parseFloat(jQuery("#morg_principal").text(),10)+hoo_fees+property_tax;jQuery("#morg_month_total").text(total_monthly.toFixed(2))})),jQuery("#morgage_home_price,#morgage_term,#morgage_interest,#monthly_property_tax,#hoo_fees").on("change",(function(){wpestate_compute_morg()}))}}function wpestate_compute_morg(){var morgage_home_price=parseFloat(jQuery("#morgage_home_price").val(),10);isNaN(morgage_home_price)&&(morgage_home_price=0);var morgage_down_payment_value=parseFloat(jQuery("#morgage_down_payment").val(),10);isNaN(morgage_down_payment_value)&&(morgage_down_payment_value=0);var morgage_term=parseFloat(jQuery("#morgage_term").val(),10);isNaN(morgage_term)&&(morgage_term=1);var morgage_interest=parseFloat(jQuery("#morgage_interest").val(),10);isNaN(morgage_interest)&&(morgage_interest=0);var hoo_fees=parseFloat(jQuery("#hoo_fees").val(),10);isNaN(hoo_fees)&&(hoo_fees=0);var property_tax=parseFloat(jQuery("#monthly_property_tax").val(),10);isNaN(property_tax)&&(property_tax=0);var morgage_down_payment_percent=parseFloat(100*morgage_down_payment_value/morgage_home_price,10);isNaN(morgage_down_payment_percent)&&(morgage_down_payment_percent=0),jQuery("#morgage_down_payment_percent").val(morgage_down_payment_percent.toFixed(2));var principal=morgage_home_price-morgage_down_payment_value,operator_A=parseFloat(morgage_interest/100/12*principal,10),operator_B=parseFloat(1+morgage_interest/100/12,10),montly_pmt=parseFloat(operator_A/(1-Math.pow(operator_B,-1*morgage_term*12)),10);0==morgage_interest&&(montly_pmt=parseFloat(principal/(12*morgage_term),10));var total_monthly=montly_pmt+hoo_fees+property_tax;0===morgage_home_price&&(total_monthly=0,montly_pmt=0),jQuery("#morg_principal").text(montly_pmt.toFixed(2)),jQuery("#morg_month_total").text(total_monthly.toFixed(2));var percent_principal=parseFloat(100*montly_pmt/total_monthly,10),percent_hoa=parseFloat(100*hoo_fees/total_monthly,10),percent_tax=parseFloat(100*property_tax/total_monthly,10);morgageChart.data.datasets[0].data=[percent_principal,percent_tax,percent_hoa],morgageChart.update()}function wpestate_show_stat_accordion(){if(document.getElementById("myChart")){var ctx=jQuery("#myChart").get(0).getContext("2d"),myNewChart=new Chart(ctx),labels="",traffic_data="  ";labels=jQuery.parseJSON(wpestate_property_vars.singular_label),traffic_data=jQuery.parseJSON(wpestate_property_vars.singular_values);var data={labels:labels,datasets:[{label:wpestate_property_vars.property_views,fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:traffic_data}]},options,myBarChart=new Chart(ctx,{type:"bar",data:data,options:{title:"page views",scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}})}}function wpestate_print_property_page(){jQuery("#print_page").on("click",(function(event){var prop_id,myWindow,ajaxurl;ajaxurl=control_vars.admin_url+"admin-ajax.php",event.preventDefault(),prop_id=jQuery(this).attr("data-propid"),myWindow=window.open("","Print Me","width=700 ,height=842");var nonce=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wpestate_ajax_create_print",propid:prop_id,security:nonce},success:function(data){myWindow.document.write(data),myWindow.document.close(),myWindow.focus(),setTimeout((function(){myWindow.print()}),3e3)},error:function(errorThrown){}})}))}function wpestate_edit_review(){jQuery("#edit_review").on("click",(function(event){var listing_id=jQuery(this).attr("data-listing_id"),title=jQuery(this).parent().find("#wpestate_review_title").val(),content=jQuery(this).parent().find("#wpestare_review_content").val(),stars=jQuery(this).parent().find(".starselected_click").length,ajaxurl=control_vars.admin_url+"admin-ajax.php",acesta=jQuery(this),parent=jQuery(this).parent().parent(),coment=jQuery(this).attr("data-coment_id");stars>0&&""!=content&&jQuery(".rating").text(control_vars.posting);var nonce=jQuery("#wpestate_review_nonce").val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wpestate_edit_review",listing_id:listing_id,title:title,stars:stars,content:content,coment:coment,security:nonce},success:function(data){jQuery(".rating").text(control_vars.review_edited)},error:function(errorThrown){}})}))}function wpestate_submit_review(){jQuery("#submit_review").on("click",(function(event){var listing_id=jQuery(this).attr("data-listing_id"),title=jQuery(this).parent().find("#wpestate_review_title").val(),content=jQuery(this).parent().find("#wpestare_review_content").val(),stars=jQuery(this).parent().find(".starselected_click").length,ajaxurl=control_vars.admin_url+"admin-ajax.php",acesta=jQuery(this),parent=jQuery(this).parent().parent();stars>0&&""!=content&&jQuery(".rating").text(control_vars.posting);var nonce=jQuery("#wpestate_review_nonce").val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wpestate_post_review",listing_id:listing_id,title:title,stars:stars,content:content,security:nonce},success:function(data){jQuery(".rating").text(control_vars.review_posted),jQuery("#wpestate_review_title").val(""),jQuery("#wpestare_review_content").val("")},error:function(errorThrown){}})}))}function wpestate_enable_floor_plans(){jQuery(".front_plan_row").on("click",(function(event){event.preventDefault(),jQuery(this).parent().find(".front_plan_row_image").slideUp(),jQuery(this).next().slideDown()})),jQuery(".deleter_floor").on("click",(function(event){jQuery(this).parent().remove()}))}jQuery(document).ready((function($){"use strict";wpestate_enable_star_action(),wpestate_print_property_page(),wpestate_edit_review(),wpestate_submit_review(),wpestate_enable_floor_plans(),jQuery(".venobox").length>0&&jQuery(".venobox").venobox()}));